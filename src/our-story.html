<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <title>Our Story - Vietnamese Food - Pho Restaurants</title>
        <meta name="HandheldFriendly" content="True">
		<meta name="MobileOptimized" content="320">
		<meta name="viewport" content="width=device-width, initial-scale=1"/>

        <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <link rel="stylesheet" id="main-css" href="./index.css">
        <link rel="icon" href="./wp-content/themes/library/images/favicon.ico">
    </head>
    <body>
        <header role="banner">

            <div class="u__wrapper">
                <div class="d-flex align-items-start">

                    <div class="logo">
                        <!-- miss class -->
                        <div class="fixed-wrapper">

                            <a href="index.html">

                                <div class="css-logo">
                                    <div class="lines">
                                        <div class="lines-inner">
                                            <div class="line left"></div>
                                            <div class="line center"></div>
                                            <div class="line right"></div>
                                        </div>
                                    </div>
                                    <div class="bowl-wrapper">
                                        <div class="bowl"></div>
                                    </div>
                                </div>
                                <div class="text-logo">
                                    <img src="./wp-content/themes/library/images/pho-title.svg" alt="Pho Text Logo">
                                </div>

                            </a>

                        </div>
                    </div>

                    <div class="center-links flex-fill nav-hidden">

                        <a href="./MENUS.html">MENU</a>
                        <a href="./our-story.html">OUR STORY</a>
                        <a href="./locations.html">LOCATIONS</a>
                        <a href="./gallery.html">GALLERY</a>


                    </div>

                    <div class="main-links">
                        <div class="fixed-wrapper">

                            <a href="./locations.html" class="bag-icon"><img src="./wp-content/themes/library/images/bag-icon.svg" alt="Bag Icon">Book a Table</a>
                            <a href="" class="pin-icon"><img src="./wp-content/themes/library/images/user-admin(2).svg" alt="Admin Icon" width="25" height="25">Admin Mode</a>
                            	
                            <div class="hamburger__wrapper d-inline-block">
                                <div class="hamburger js__open-nav">
                                    <div class="line top"></div>
                                    <div class="line middle"></div>
                                    <div class="line bottom"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            </div>

            <div id="nav-popup" data-colour="#E21837" data-image="#">
                <div class="row align-items-center">
                    <div class="hamburger-wrapper u__wrapper">
                        <div class="hamburger js__open-nav">
                            <div class="line top"></div>
                            <div class="line middle"></div>
                            <div class="line bottom"></div>
                        </div>
                    </div>

                    <div class="col-6 nav-popup__img">
                        <img src="./wp-content/themes/library/images/popup-img.png" alt=""/>
                    </div>

                    <div class="col-6 nav-popup__links">
                        <nav class="popup-main" role="navigation">
                            <a href="">MENU</a>
                            <a href="">LOCATION</a>
                            <a href="">OUR STORY</a>
                            <a href="">PHO TO GO</a>
                            <a href="">BOOKINGs</a>
                            <a href="">CAREERS</a>
                            <a href="">CONTACT</a>

                        </nav>

                        <ul class="social">
                            <li>
                                <a href="" class="facebook" title=""><i class="fa fa-facebook"></i></a>
                            </li>
                            <li>
                                <a href="" class="instagram" title=""><i class="fa fa-instagram"></i></a>
                            </li>
                            <li>
                                <a href="" class="youtube" title=""><i class="fa fa-youtube"></i></a>
                            </li>
                            <li>
                                <a href="" class="twitter" title=""><i class="fa fa-twitter"></i></a>
                            </li>
                        </ul>

                        <div class="popup-footer">
                            <nav role="navigation">
                                <ul class="nav">
                                    <li><a href="">FAQs</a></li>
                                    <li><a href="">Privacy</a></li>
                                    <li><a href="">GIFT VOUCHERS</a></li>
                                </ul>
                            </nav>

                            <p>&copy; Copyright Pho 2024.</p>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <div class="site-wrapper about-us">
            <div class="background">
                <div class="background__colour" style="background-color: #586b71;"></div>
                <div class="background__image">
                    <img src="./wp-content/themes/library/images/Our-Story-Background.jpg" alt="">
                </div>
                <div class="background__gradient"></div>
            </div>
            
            <div class="foreground">
                <main class="content about-us" data-template="about-us" data-ajax="">
                    
                    <div class="illustrated-map u__wrapper"></div>

                    <section class="about-header text-center">
                        <div class="white-background swipeEffect">
                            <p class="swipeEffect_text">Our Story</p>
                            <div class="swipeEffect__revealer"></div>
                        </div>
                    </section>

                    <section class="about-row">
                        <div class="u__wrapper row">
                            <div class="col-md-6">
                                <div class="image-wrapper upper u__imgBorder">
                                    <img src="./wp-content/themes/library/images/1.webp" alt="">
                                </div>
                                <div class="box">
                                    <p>Stephen and Juliette Wall opened Pho after they travelled to Vietnam and fell in love with the food. </p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <section class="about-row">
                        <div class="u__wrapper row justify-content-end">
                            <div class="col-md-6">
                                <div class="image-wrapper upper u__imgBorder">
                                    <img src="https://content.phocafe.co.uk/wp-content/uploads/2024/10/202409_Pho_NewWebsite_086_LRG-scaled.jpg" alt="">
                                </div>

                                <div class="box">
                                    <p>In 2005, they made the decision to start a restaurant serving phở while sat on high stools, slurping pho bo, in Ho Chi Minh City.</p>				
                                </div>

                                <div class="image-wrapper lower u__imgBorder">
                                    <img src="https://content.phocafe.co.uk/wp-content/uploads/2024/11/202410_Pho_BoroughWinter_0441-copy-scaled.jpeg" alt="">
                                </div>
                            </div>
                        </div>
                    </section>

                    <section class="about-row">
                        <div class="u__wrapper row">
                            <div class="col-md-6">
                                <div class="image-wrapper upper u__imgBorder">
                                    <img src="https://content.phocafe.co.uk/wp-content/uploads/2024/10/202409_Pho_NewWebsite_214_LRG-scaled.jpg" alt="">
                                </div>
                                <div class="box">
                                    <p>All these years later, Pho is a group of restaurants dotted around the country, serving great value, healthy Vietnamese food that's cooked fresh in each kitchen daily. </p>				
                                </div>
                                <div class="image-wrapper lower u__imgBorder">
                                    <img src="https://content.phocafe.co.uk/wp-content/uploads/2024/10/Pho_AUG_24_RAWs2201-Edit-2.jpg" alt="">
                                </div>
                            </div>
                        </div>
                    </section>

                    <section class="newsletter-wrapper">
                        <div class="newsletter-v2 u__wrapper">
                            <div class="d-flex">
                                <img src="./wp-content/themes/library/images/notepad.webp" alt="">
    
                                <div class="newsletter-v2__header">
                                    <label for="EMAIL">NEWS AND OFFERS</label>
                                    <p>Sign up to our newsletter to keep up-to-date with all the latest news and offers</p>
                                </div>
                            </div>
                            <form id="footer__mailing-list__form" name="footer__mailing-list__form" class="signup__form mailing-list__form" novalidate>
                                <div class="row">   
                                    <div class="col-md-4">
                                        <input type="text" value="" name="first_name" class="mailing-list__first-name input-first-name" id="footer__mailing-list__first-name"  placeholder="Type your first name*" required>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" value="" name="last_name" class="mailing-list__last-name input-last-name" id="footer__mailing-list__last-name" placeholder="Type your last name*" required>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="email" value="" name="to_email" class="mailing-list__email input-email" id="footer__mailing-list__email"  placeholder="Type your email address*" required>
                                    </div>
                                    <div class="col-md-4">
                                        <input type="date" value="" name="dob" class="mailing-list__dob input-dob empty" id="footer__mailing-list__dob"  placeholder="Type your D.O.B">
                                    </div>
                                    <div class="col-md-4">
                                        <input type="text" value="" name="phone_number" class="mailing-list__phone-number input-phone-number" id="footer__mailing-list__phone-number" placeholder="Type your phone number*" required>
                                    </div>  
                                    <div class="col-md-4">
                                        <div class="d-flex">
                                            <div class="checkbox_holder">
                                                <input type="checkbox" value="" name="PRIVACY" class="mailing-list__privacy" id="footer__mailing-list__privacy" required>
                                                <p>By signing up you are agreeing to receive marketing updates from Pho.</p>                                            </div>
                                            <button type="submit" id="footer__mailing-list__submit_v2" class="button input-submit mailing-list__submit">Submit</button>
                                            <p class="error">Please agree to the privacy policy</p>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </section>

                </main>
            </div>
        </div>

        <footer>
            <div class="u__wrapper top">
                <nav role="navigation">
                    <ul class="nav footer-nav">
                        <li><a href="">Careers</a></li>
                        <li><a href="">FAQs</a></li>
                        <li><a href="">Privacy</a></li>
                        <li><a href="">Gift Vouchers</a></li>
                        <li></li>
                    </ul>
                </nav>
                <div class="social">
                    <ul>
                        <li><a href="" class="facebook" title=""><i class="fa fa-facebook"></i></a></li>
                        <li><a href="" class="instagram" title=""><i class="fa fa-instagram"></i></a></li>
                        <li><a href="" class="youtube" title=""><i class="fa fa-youtube"></i></a></li>
                        <li><a href="" class="twitter" title=""><i class="fa fa-twitter"></i></a></li>
                    </ul>
                </div>
            </div>

            <div class="u__wrapper">
                <div class="footer__bottom | d-flex align-items-center justify-content-between">
                    <p>&copy; Copyright Pho 2024.</p>
                </div>
            </div>
        </footer>

        <script type="text/javascript" src="https://cdn.emailjs.com/dist/email.min.js"></script>
        <script type="text/javascript">
            (function(){
                emailjs.init("2tUcc_rPhb5QtRfIM");
            })();
        </script>
        
        <!-- Booking Modal -->
        <div class="modal fade" id="bookingModal" tabindex="-1" aria-labelledby="bookingModalLabel" aria-hidden="true">
            <div class="modal-dialog booking-widget | lg:p-6 bg-black rounded-[20px]">
                <div class="modal-content bg-red rounded-[20px] relative">
                    <div class="inner | pt-7 px-4 pb-4 xl:p-8">
                        <div class="modal-header">
                            <h5 class="" id="bookingModalLabel">Book a Table</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form id="bookingForm">
                                <div style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                                    <div class="md-3" style="flex: 1; text-align: left;">
                                        <label for="branch" class="form-label uppercase"style="display: block; margin-bottom: 0px;">Restaurant Location</label>
                                    </div>
                                    <div class="md-3" style="flex: 1; text-align: center;">
                                        <input type="text" class="form-control" id="branch" readonly>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="address" class="form-label uppercase">Address</label>
                                    <input type="text" class="form-control" id="address" readonly>
                                </div>
                                <div class="mb-3">
                                    <label for="name" class="form-label uppercase">Your Name</label>
                                    <input type="text" class="form-control" id="name" required>
                                </div>
                                <div class="mb-3">
                                    <label for="phone" class="form-label uppercase">Phone Number</label>
                                    <input type="text" class="form-control" id="phone" required>
                                </div>
                                <div class="mb-3">
                                    <label for="date" class="form-label uppercase">Date</label>
                                    <input type="date" class="form-control" id="date" required>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="time" class="form-label uppercase">Time</label>
                                        <input type="time" class="form-control" id="time" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="people" class="form-label uppercase">Number of people</label>
                                        <select name="people" class="form-control" id="people">
                                            <option value="1">1 Person</option>
                                            <option value="2">2 People</option>
                                            <option value="3">3 People</option>
                                            <option value="4">4 People</option>
                                        </select>
                                    </div>
                                </div>
                                <button type="submit" class="button" style="display: block; margin: 0 auto; text-align: center;">Confirm Booking</button>
                                <!-- <button onclick="downloadInvoice(1)">Download Invoice</button> -->
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Booking -->
        <script>
            console.log("Script loaded!");

            document.getElementById("bookingForm").addEventListener("submit", async function (e) {
                e.preventDefault();
                
                console.log("Form submitted!");

                const bookingData = {
                    branch: document.getElementById("branch").value,
                    address: document.getElementById("address").value,
                    name: document.getElementById("name").value,
                    phone: document.getElementById("phone").value,
                    date: document.getElementById("date").value,
                    time: document.getElementById("time").value,
                    people: document.getElementById("people").value
                };
                console.log("Booking Data:", bookingData);

                try {
                    const response = await fetch("http://localhost:3000/bookings", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify(bookingData)
                    });

                    if (!response.ok) throw new Error("Network response was not ok");

                    const result = await response.json();
                    console.log("Server Response:", result); // Kiểm tra phản hồi từ server
                    alert(result.message);
                } catch (error) {
                    console.error("Error:", error);
                    alert("Booking failed. Check console for details.");
                }
            });
        </script>

        <!-- Customers -->
        <script>
            document.getElementById("footer__mailing-list__form").addEventListener("submit", async function (event) {
                event.preventDefault();

                const firstName = document.getElementById("footer__mailing-list__first-name").value;
                const lastName = document.getElementById("footer__mailing-list__last-name").value;
                const email = document.getElementById("footer__mailing-list__email").value;
                const dob = document.getElementById("footer__mailing-list__dob").value;
                const phoneNumber = document.getElementById("footer__mailing-list__phone-number").value;
                const privacyAgreed = document.getElementById("footer__mailing-list__privacy").checked;

                if (!privacyAgreed) {
                    alert("Please agree to the privacy policy.");
                    return;
                }

                const customerData = {
                    first_name: firstName,
                    last_name: lastName,
                    email: email,
                    dob: dob || null,
                    phone_number: phoneNumber,
                    privacy_agreed: privacyAgreed
                };

                try {
                    const response = await fetch("http://localhost:3000/customers", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify(customerData)
                    });

                    const result = await response.json();
                    console.log("Database response:", result);

                    // Gửi email sau khi lưu database thành công
                    const form = document.getElementById("footer__mailing-list__form");
                    await emailjs.sendForm("service_2pzma96", "template_u7pqlex", form);

                    alert("Thank you for signing up!");
                } catch (error) {
                    console.error("Error:", error);
                    alert("Failed to submit form. Please try again.");
                }
            });
        </script>


        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const bookNowButtons = document.querySelectorAll(".book-now");
        
                bookNowButtons.forEach(button => {
                    button.addEventListener("click", function () {
                        const branch = this.getAttribute("data-branch");
                        const address = this.getAttribute("data-address");
        
                        document.getElementById("branch").value = branch;
                        document.getElementById("address").value = address;
        
                        var bookingModal = new bootstrap.Modal(document.getElementById("bookingModal"));
                        bookingModal.show();
                    });
                });
            });
        </script>
        <script>
                function downloadInvoice(id) {
                    window.location.href = `http://localhost:3000/invoice/${id}`;
                }
        </script>
        <script>
            app.post("/bookings", (req, res) => {
                console.log("Data received from frontend:", req.body); // Kiểm tra dữ liệu

                const { branch, address, name, phone, date, time, people } = req.body;
                const sql = "INSERT INTO bookings (branch, address, name, phone, date, time, people) VALUES (?, ?, ?, ?, ?, ?, ?)";
                
                db.query(sql, [branch, address, name, phone, date, time, people], (err, result) => {
                    if (err) {
                        console.error("MySQL Error:", err); // Kiểm tra lỗi
                        res.status(500).json({ message: "Failed to save booking!" });
                    } else {
                        console.log("Booking successful:", result); // Kiểm tra kết quả MySQL
                        res.json({ message: "Booking successful:" });
                    }
                });
            });

        </script>
        
        <script type="text/javascript" src="https://www.phocafe.co.uk/wp-content/themes/pho-2018/library/dist/js/main.min.js?debug=1728022300" id="main_js-js"></script>  
        <script src="./booking-app/server.js"></script>
        <script src="./booking-app/package.json"></script>

    </body>
</html>